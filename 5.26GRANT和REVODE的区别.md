[TOC]



## 1.GRANT和REVODE的区别:

`GRANT` 和 `REVOKE` 是 SQL 中用于授予和撤销用户或角色权限的关键字。

- `GRANT` 用于授予用户或角色特定的权限，使其能够执行特定的操作或访问特定的对象。`GRANT` 语句通常包括要授予权限的对象（如表、视图、数据库等）、被授予权限的用户或角色，以及被授予的权限类型（如 SELECT、INSERT、UPDATE 等）。
  例如：
  
  ```sql
  GRANT SELECT, INSERT ON table_name TO user_name;
  ```
  上述语句授予用户 `user_name` 对 `table_name` 表的 SELECT 和 INSERT 权限。
  
- `REVOKE` 用于撤销已经授予的权限，将权限从用户或角色中移除。`REVOKE` 语句通常包括要撤销的权限类型、被撤销权限的对象以及要从中撤销权限的用户或角色。
  例如：
  ```sql
  REVOKE SELECT, INSERT ON table_name FROM user_name;
  ```
  上述语句从用户 `user_name` 中撤销对 `table_name` 表的 SELECT 和 INSERT 权限。

因此，`GRANT` 用于授予权限，而 `REVOKE` 用于撤销权限。通过这两个关键字，可以管理数据库中用户和角色的权限，确保数据的安全性和访问控制。



## 2.ANY和ALL的区别 ##

`ANY` 和 `ALL` 是 SQL 中用于比较的关键字，它们通常与子查询一起使用。

- `ANY` 关键字表示与子查询的任何结果进行比较。它将比较操作符应用于子查询的每个结果，并如果至少有一个结果满足条件，则返回 true。
  例如：
  
  ```sql
  SELECT column_name FROM table_name WHERE column_name > ANY (SELECT column_name FROM another_table);
  ```
  上述语句将从 `table_name` 表中选择满足条件 `column_name > ANY (SELECT column_name FROM another_table)` 的行，其中子查询返回的结果集中至少有一个值满足条件。
  
- `ALL` 关键字表示与子查询的所有结果进行比较。它将比较操作符应用于子查询的每个结果，并且只有当所有结果都满足条件时才返回 true。
  例如：
  
  ```sql
  SELECT column_name FROM table_name WHERE column_name > ALL (SELECT column_name FROM another_table);
  ```
  上述语句将从 `table_name` 表中选择满足条件 `column_name > ALL (SELECT column_name FROM another_table)` 的行，其中子查询返回的结果集中所有的值都满足条件。

因此，`ANY` 和 `ALL` 的区别在于与子查询的比较方式。`ANY` 表示与任何一个结果进行比较，而 `ALL` 表示与所有结果进行比较。



## 3.标量函数,存储过程,用户自定义函数 ##

标量函数（Scalar Function）是一种在数据库中定义的函数，它接受一组输入参数并返回一个单一的值作为结果。标量函数在每次调用时都返回一个值，可以用于 SELECT 语句的列表达式、WHERE 子句、ORDER BY 子句等处。标量函数可以根据输入参数的不同返回不同的结果。

常见的标量函数包括：

- 字符串函数：`UPPER`、`LOWER`、`SUBSTRING`、`CONCAT` 等。
- 数学函数：`ABS`、`ROUND`、`CEILING`、`FLOOR` 等。
- 日期和时间函数：`NOW`、`DATE`、`TIME`、`YEAR`、`MONTH` 等。
- 类型转换函数：`CAST`、`CONVERT` 等。
- 条件函数：`IF`、`CASE` 等。

存储过程（Stored Procedure）是一组预定义的 SQL 语句集合，它被保存在数据库中以便多次重复执行。存储过程可以接受输入参数，并可以包含条件语句、循环结构、异常处理等。存储过程通常用于执行复杂的业务逻辑，可以被应用程序通过调用来执行。

------

存储过程（Stored Procedure）是一段预先编译好的、可在数据库中存储和执行的程序。它可以接受输入参数、执行一系列数据库操作，并返回结果。

存储过程通常由 SQL 语句和控制流程语句组成，可以包含条件判断、循环、异常处理等逻辑。存储过程可以被其他程序或脚本调用，提供了一种封装和复用数据库操作的方式，可以提高性能、简化开发和维护工作。

以下是一个简单的存储过程示例，用于查询指定部门的员工数量：

```sql
CREATE PROCEDURE GetEmployeeCountByDepartment
    @DepartmentId INT
AS
BEGIN
    SELECT COUNT(*) AS EmployeeCount
    FROM Employees
    WHERE DepartmentId = @DepartmentId
END
```

在上述示例中，存储过程名为 `GetEmployeeCountByDepartment`，接受一个输入参数 `@DepartmentId`，并使用该参数在 `Employees` 表中查询符合条件的员工数量。存储过程返回一个结果集，其中包含名为 `EmployeeCount` 的列，表示员工数量。

可以通过以下代码调用存储过程并获取结果：

```sql
DECLARE @Count INT
EXEC GetEmployeeCountByDepartment @DepartmentId = 1, @Count = @Count OUTPUT
SELECT @Count AS EmployeeCount
```

上述代码将部门 ID 设置为 1，并将结果存储在 `@Count` 变量中，然后通过 `SELECT` 语句显示结果。

存储过程的优点包括：

- 提高性能：存储过程在数据库服务器上进行预编译和缓存，可以减少网络通信和重复编译的开销，提高查询性能。
- 简化开发和维护：存储过程将常用的数据库操作封装起来，简化了应用程序的开发和维护工作。
- 增强安全性：存储过程可以控制对数据库的访问权限，提供了一层额外的安全性。
- 支持事务处理：存储过程可以包含事务处理逻辑，确保一系列操作的原子性和一致性。

需要注意的是，存储过程的语法和用法可能因数据库管理系统而异。上述示例是针对 SQL Server 的语法，其他数据库系统可能会有不同的语法和特性。

------

用户自定义函数（User-Defined Function，UDF）是用户根据特定需求定义的函数，用于扩展数据库的功能。UDF 可以根据自定义的逻辑和算法接受输入参数并返回一个值或一个表作为结果。UDF 可以用于 SELECT 语句的列表达式、WHERE 子句、JOIN 子句等处，类似于标量函数。用户自定义函数可以在数据库中被定义、存储和调用，以提供自定义的计算和转换操作。

### 3.1用户自定义函数和存储过程有什么区别?

用户自定义函数和存储过程是数据库中可编程的对象，但它们在功能和使用方式上有一些区别。

1. 功能：用户自定义函数用于执行某种计算或转换操作，并返回一个值作为结果。函数可以接受输入参数，根据参数执行逻辑，并返回计算结果。常见的函数包括数学函数（如求平方根、绝对值等）、字符串函数（如拼接、截取等）和日期函数（如格式化、计算差值等）等。存储过程则用于执行一系列数据库操作，可以包含多个 SQL 语句和控制流程语句，并且可以接受输入参数和返回结果集。

2. 使用方式：用户自定义函数通常以表达式的形式嵌入到 SQL 查询语句中，可以作为 SELECT 语句的一部分使用，也可以用于计算列值或条件判断。函数在查询执行期间被调用，返回结果直接参与查询的计算。存储过程需要通过存储过程名来调用，并且可以包含事务处理逻辑。存储过程通常被用于封装复杂的业务逻辑或批量处理操作，可以在应用程序中调用存储过程来执行特定的数据库操作。

3. 返回结果：用户自定义函数通常返回单个值作为结果，可以是标量值（如整数、字符串等）或表值。存储过程可以返回多个结果集，每个结果集可以包含多行和多列的数据。存储过程的结果可以通过查询或输出参数获取。

4. 用途和适用场景：用户自定义函数适用于在 SQL 查询中进行数据转换和计算，可以方便地在查询中使用，提高查询的可读性和可维护性。存储过程适用于封装和复用复杂的业务逻辑，可以在应用程序中调用，提高性能和安全性，并支持事务处理和批量操作。

需要注意的是，用户自定义函数和存储过程的语法和用法可能因数据库管理系统而异。不同的数据库系统可能对函数和存储过程的支持和特性有所不同。

总结：
- 标量函数：接受输入参数并返回单个值的函数。
- 存储过程：一组预定义的 SQL 语句集合，可以多次重复执行。
- 用户自定义函数：根据特定需求定义的函数，用于扩展数据库的功能。

## 4.JOIN的使用

在 SQL 中，JOIN 是一种用于将多个表中的数据关联起来的操作。它基于列之间的关联条件，从多个表中检索数据并将它们合并在一起。

常见的 JOIN 类型包括：

1. INNER JOIN（内连接,默认）：返回两个表中满足连接条件的行。只有在连接条件匹配的情况下，才会将两个表中的行合并到结果集中。**若条件中有null,则直接跳过**

2. LEFT JOIN（左连接）：返回左表中的所有行以及右表中满足连接条件的行。如果右表中没有匹配的行，那么对应的结果集中的右表列将**包含 NULL 值。**

3. RIGHT JOIN（右连接）：返回右表中的所有行以及左表中满足连接条件的行。如果左表中没有匹配的行，那么对应的结果集中的左表列将**包含 NULL 值。**

4. FULL JOIN（全连接）：**在mysql8.0之后被取消了,这样写会报错**. 返回左表和右表中的所有行，如果某个表中没有匹配的行，则对应的结果集中的列将包含 NULL 值。

使用 JOIN 可以根据不同的连接条件将多个表中的数据关联起来，从而提供更丰富的查询结果。通过指定 JOIN 条件，你可以根据共同的列值来获取相关联的数据，进行数据的组合、筛选和分析。

下面是一个简单的示例，展示了如何使用 INNER JOIN 将两个表 `Orders` 和 `Customers` 关联起来：

```sql
SELECT Orders.OrderID, Customers.CustomerName
FROM Orders
INNER JOIN Customers
ON Orders.CustomerID = Customers.CustomerID;
```

在上述示例中，`Orders` 表和 `Customers` 表通过 `CustomerID` 列进行连接。通过 INNER JOIN，返回了满足连接条件的行，并且只选择了需要的列（`OrderID` 和 `CustomerName`）。

注意，JOIN 可以用于连接多个表，可以根据具体的业务需求和数据关系进行灵活的组合和使用。



## 5.正则表达式简述

1.^  -> 以...为开头

2.$ -> 以...为结尾

3.[ab] -> a或b

4.ab -> ab为一个整体 如: ^ab  -> 以ab为开头 ab$ 以ab为结尾

**5. [ ^ab ] -> 匹配不在括号内的任何字符 ** 



## 6.TRUNCATE和DELETE的区别

`TRUNCATE`和`DELETE`是数据库中用于删除数据的两个常见操作，它们之间有以下区别：

1. 功能：`TRUNCATE`用于删除表中的所有数据，而不仅仅是删除数据行，它将表重置为空状态。`DELETE`用于删除表中的指定数据行。

2. 效率：`TRUNCATE`操作通常比`DELETE`操作更快，因为它是通过直接删除表中的数据页来实现的，而不是逐行删除。这意味着`TRUNCATE`操作不会产生事务日志，也不会触发触发器和其他相关操作。相比之下，`DELETE`操作需要逐行删除数据，并在事务日志中记录每个删除操作。

3. 回滚：`TRUNCATE`操作无法回滚，一旦执行成功，数据将永久删除。`DELETE`操作可以通过事务回滚来恢复被删除的数据。

4. 权限：通常，执行`TRUNCATE`操作需要更高的权限，因为它是一个危险的操作，可以快速删除大量数据。相比之下，`DELETE`操作对于有适当权限的用户来说更容易控制和限制。

5. 触发器：`TRUNCATE`操作不会触发与表相关的触发器，而`DELETE`操作会触发相关的触发器。

综上所述，`TRUNCATE`操作适用于需要快速清空表数据且不需要进行回滚的情况，而`DELETE`操作适用于对表进行有选择性的数据删除并具备回滚能力的情况。选择使用哪种操作取决于具体的需求和场景。

## 7.触发器

在SQL中，触发器（Trigger）是一种特殊类型的存储过程，它与数据库表相关联，并在表上的特定事件发生时自动执行。触发器可以在以下事件发生时触发执行：

1. INSERT：在向表中插入数据之前或之后触发。
2. UPDATE：在更新表中的数据之前或之后触发。
3. DELETE：在从表中删除数据之前或之后触发。

触发器可以在特定事件发生时执行一系列的操作，如插入、更新或删除其他表中的数据，修改数据的值，生成日志等。触发器可以用于实现数据完整性约束、审计跟踪、日志记录、自动计算等需求。

在创建触发器时，需要指定触发器所关联的表、触发事件（INSERT、UPDATE、DELETE）、触发时机（BEFORE、AFTER）以及触发时执行的操作（触发器的主体）。

以下是一个简单的触发器的示例，当向表中插入新数据时，自动更新另一个表的计数器字段：

```sql
CREATE TRIGGER update_counter
AFTER INSERT ON table1
FOR EACH ROW
BEGIN
    UPDATE table2 SET counter = counter + 1;
END;
```

在上述示例中，当在`table1`表中插入新数据时，触发器`update_counter`会在每个插入操作之后执行，更新`table2`表中的计数器字段。

触发器是一种强大的工具，可以在特定的数据库操作发生时自动执行相应的逻辑。但需要注意，在使用触发器时要小心设计，避免触发器的复杂性和执行逻辑的影响导致性能问题和不可预料的结果。

## 小记

1. **<> ** 在sql语句中是指不等于的意思 